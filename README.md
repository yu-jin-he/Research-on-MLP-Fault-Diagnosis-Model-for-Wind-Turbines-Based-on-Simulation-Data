# 风力发电机数据驱动故障预测与可视化分析

## 一、项目简介

本项目通过仿真生成风力发电机运行与故障数据，结合多种可视化分析方法和机器学习建模，实现风力发电机故障的智能预测与物理机制解释。项目流程包括数据生成、数据增强、特征分析、可视化展示、MLP神经网络建模、物理约束建模及模型性能对比等环节，适用于风电可靠性工程、数据驱动建模、物理信息神经网络（PINN）等相关研究与教学。

---

## 二、文件说明

- **wind_turbine_data_generator.py**  
  风力发电机数据生成脚本。根据物理规律、季节/日变化、故障模式等，仿真生成包含多种工况和故障类型的时序数据，输出为`enhanced_wind_turbine_data.csv`。
  - 物理量仿真（风速、转速、功率、温度、振动、油温、油位等）
  - 多种故障模式（机械、电气、润滑、控制）
  - 季节、昼夜、极端天气等多样性
  - 生成数据并保存为CSV文件

- **enhanced_dataset_visualization.py**  
  数据分析与可视化脚本。对生成的数据集进行统计分析、特征分布、物理关系、故障模式、特征重要性等多维度可视化，支持静态图片和交互式HTML仪表盘。
  - 数据集统计与对比
  - 物理关系拟合与验证（如贝兹公式、转速-振动、功率-温度等）
  - 故障模式分析（分布、降维、雷达图等）
  - 特征重要性与区分能力分析
  - 交互式3D/多参数仪表盘

- **wind_turbine_mlp_model.py**  
  故障预测建模脚本。基于MLP神经网络，逐步引入特征交互、物理约束，训练并评估风力发电机故障预测模型，输出模型性能对比结果。
  - 数据加载与预处理（中英文特征自动映射）
  - 基础MLP模型训练与评估
  - 特征交互项自动生成
  - 物理约束损失自定义（风速-功率、转速-振动、温度-功率等）
  - 多模型性能对比与可视化

- **enhanced_wind_turbine_data.csv**  
  增强版风力发电机数据集，包含时间、风速、转速、功率、温度、振动、油温、油位、故障标签等多维特征。

- **model_comparison.csv**  
  不同模型（基础MLP、特征交互MLP、物理约束MLP）在准确率、精确率、召回率、F1分数、AUC等指标上的对比结果。

---

## 三、数据字段说明

enhanced_wind_turbine_data.csv 主要字段如下：

| 字段名             | 含义             | 单位         |
|--------------------|------------------|--------------|
| 时间               | 采样时间         | -            |
| 风速(m/s)          | 风速             | m/s          |
| 转速(rpm)          | 风轮转速         | rpm          |
| 功率输出(kW)       | 功率输出         | kW           |
| 温度(℃)           | 环境温度         | ℃            |
| 振动(mm/s)         | 振动             | mm/s         |
| 油温(℃)           | 润滑油温度       | ℃            |
| 油位(%)            | 润滑油位         | %            |
| 齿轮箱油温(℃)     | 齿轮箱油温       | ℃            |
| 齿轮箱油位(%)      | 齿轮箱油位       | %            |
| 发电机温度(℃)     | 发电机温度       | ℃            |
| 偏航角度(度)       | 偏航角度         | °            |
| 偏航速度(度/s)     | 偏航速度         | °/s          |
| 桨距角(度)         | 桨距角           | °            |
| 风向(度)           | 风向             | °            |
| 气压(hPa)          | 气压             | hPa          |
| 湿度(%)            | 湿度             | %            |
| 故障标签           | 故障状态(0/1)    | -            |

---

## 四、环境依赖

建议使用 Python 3.8 及以上版本，主要依赖如下：

- numpy
- pandas
- matplotlib
- seaborn
- plotly
- scikit-learn
- tensorflow
- scipy

可通过如下命令一键安装：

```bash
pip install numpy pandas matplotlib seaborn plotly scikit-learn tensorflow scipy
```

---

## 五、使用方法

### 1. 数据生成

运行数据生成脚本，生成增强版风力发电机数据集：

```bash
python wind_turbine_data_generator.py
```

- 生成文件：`enhanced_wind_turbine_data.csv`
- 数据量和字段可在脚本内调整

### 2. 数据分析与可视化

运行可视化分析脚本，自动完成统计、分布、物理关系、故障模式、特征重要性等多种可视化：

```bash
python enhanced_dataset_visualization.py
```

- 主要输出：
  - `增强_原始数据分布对比.png`
  - `故障样本比例对比.png`
  - `关键物理关系对比.png`
  - `风速功率贝兹关系.png`
  - `转速振动二次关系.png`
  - `功率温度线性关系.png`
  - `风速转速功率三维关系.png`
  - `故障参数分布对比.png`
  - `故障模式tsne可视化.png`
  - `故障特征雷达图.png`
  - `特征重要性排序.png`
  - `特征相关性热图.png`
  - `重要特征散点图矩阵.png`
  - `特征区分能力_箱线图对比.png`
  - `特征区分能力_散点图对比.png`
  - `风速转速功率_3D交互图.html`
  - `每日故障趋势_交互图.html`
  - `风力发电机参数交互式仪表盘.html`

> 所有图片和交互式仪表盘均自动保存在当前目录，便于论文插图或报告展示。

### 3. 故障预测建模与评估

运行MLP建模脚本，自动完成数据加载、特征处理、模型训练、物理约束建模、性能评估与对比：

```bash
python wind_turbine_mlp_model.py
```

- 主要输出：
  - `confusion_matrix.png`（混淆矩阵）
  - `roc_curve.png`（ROC曲线）
  - `training_history.png`（训练过程曲线）
  - `model_comparison.csv`（不同模型性能对比表）
  - `model_comparison.png`（性能对比可视化）

---

## 六、输出结果说明

- **图片文件**：所有静态图片均为高分辨率PNG格式，中文标题、标签，适合直接用于论文、PPT等。
- **交互式HTML**：可用浏览器打开，支持三维旋转、缩放、悬浮提示等交互操作。
- **CSV对比表**：`model_comparison.csv`，内容示例：

| 模型名称             | accuracy | precision | recall | f1    | auc   |
|----------------------|----------|-----------|--------|-------|-------|
| 基础MLP              | 0.9925   | 1.0       | 0.84   | 0.91  | 0.99  |
| 特征交互MLP          | 0.997    | 1.0       | 0.94   | 0.97  | 0.999 |
| 平衡物理约束MLP      | 0.967    | 1.0       | 0.30   | 0.46  | 0.93  |

- **数据集**：`enhanced_wind_turbine_data.csv`，字段详见上文。

---

## 七、注意事项与常见问题

- **中文显示问题**：如图片中文乱码，请确保系统已安装黑体、微软雅黑等中文字体。
- **依赖安装问题**：如遇到依赖库报错，建议升级pip并单独安装缺失库。
- **大文件读取**：数据集较大时，建议使用pandas分块读取或在内存充足环境下运行。
- **模型训练耗时**：神经网络训练过程可能较慢，建议使用GPU环境或减少样本量调试。
- **自定义参数**：可在各脚本开头自定义样本数、特征、网络结构、可视化参数等。

如遇其他问题，欢迎在代码注释区留言或联系作者。

---

如需进一步扩展或定制功能，欢迎在本项目基础上二次开发！ 